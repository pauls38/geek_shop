{"ast":null,"code":"import _toConsumableArray from \"D:/GeekBrains/\\u041F\\u0440\\u0430\\u043A\\u0442\\u0438\\u043A\\u0430 geekbrains/Agile practic/\\u0421\\u043E\\u0432\\u043C\\u0435\\u0441\\u0442\\u043D\\u044B\\u0439 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442-\\u0441\\u0442\\u0430\\u0436\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430/\\u0421\\u043E\\u0432\\u043C\\u0435\\u0441\\u0442\\u043D\\u044B\\u0439 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442-\\u0441\\u0442\\u0430\\u0436\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport \"core-js/modules/es.array.reduce.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.find-index.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport { createStore } from 'vuex';\nexport default createStore({\n  state: {\n    catalog: [{}],\n    cart: [],\n    category: [],\n    preView: [],\n    imageUrl: 'http://svalka-back.im56.ru/'\n  },\n  getters: {\n    getCatalog: function getCatalog(state) {\n      return _toConsumableArray(state.catalog);\n    },\n    getCategory: function getCategory(state) {\n      return _toConsumableArray(state.category);\n    },\n    getCart: function getCart(state) {\n      return _toConsumableArray(state.cart);\n    },\n    //getPreView: (state) = [...state.catalog],    \n    getCartCount: function getCartCount(state) {\n      return state.cart.reduce(function (acc, item) {\n        return acc + item.quantity;\n      }, 0);\n    }\n  },\n  mutations: {\n    setCatalog: function setCatalog(state, catalog) {\n      state.catalog = catalog;\n    },\n    // setCatalog: (state, catalog) => {console.log(state)},\n    setCart: function setCart(state, cart) {\n      state.cart = cart;\n    },\n    setCategory: function setCategory(state, category) {\n      state.category = category;\n    },\n    preView: function preView(state, catalog) {\n      state.preView = catalog;\n      alert('test');\n    },\n    addToCart: function addToCart(state, product) {\n      var existProduct = state.cart.find(function (item) {\n        return item.id === product.id;\n      }); // console.log(product);\n\n      if (existProduct) {\n        existProduct.quantity++;\n      } else {\n        state.cart.push(Object.assign({\n          quantity: 1\n        }, product));\n      }\n    },\n    removeFromCart: function removeFromCart(state, id) {\n      var idx = state.cart.findIndex(function (item) {\n        return item.id === id;\n      });\n      state.cart.splice(idx, 1);\n    },\n    setQuantity: function setQuantity(state, _ref) {\n      var id = _ref.id,\n          quantity = _ref.quantity;\n      var product = state.cart.find(function (item) {\n        return item.id === id;\n      });\n      product.quantity = quantity;\n    }\n  },\n  actions: {\n    loadCatalog: function loadCatalog(_ref2) {\n      var commit = _ref2.commit;\n      // return fetch('https://jsonplaceholder.typicode.com/photos?_limit=10')\n      return fetch('http://svalka-back.im56.ru/api/products').then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        // console.log(data);\n        commit('setCatalog', data);\n      });\n    },\n    loadCatalogCategory: function loadCatalogCategory(_ref3) {\n      var commit = _ref3.commit;\n      return fetch('http://svalka-back.im56.ru/api/categories').then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        //console.log(data);\n        commit('setCategory', data);\n      });\n    },\n    loadCart: function loadCart(_ref4) {\n      var commit = _ref4.commit;\n      return fetch(\"/api/v1/cart\").then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        commit('setCart', data);\n      });\n    },\n    addToCart: function addToCart(_ref5, product) {\n      var commit = _ref5.commit;\n      return fetch(\"/api/v1/cart\", {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(product)\n      }).then(function () {\n        commit('addToCart', product);\n      });\n    },\n    preView: function preView(_ref6, product) {\n      var commit = _ref6.commit;\n      return fetch(\"/api/v1/preView\", {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(product)\n      }).then(function () {\n        commit('preView', product);\n      });\n    },\n    setQuantity: function setQuantity(_ref7, _ref8) {\n      var commit = _ref7.commit;\n      var id = _ref8.id,\n          quantity = _ref8.quantity;\n      return fetch(\"/api/v1/cart/\".concat(id), {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          quantity: quantity\n        })\n      }).then(function () {\n        commit('setQuantity', {\n          id: id,\n          quantity: quantity\n        });\n      });\n    },\n    removeFromCart: function removeFromCart(_ref9, id) {\n      var commit = _ref9.commit;\n      return fetch(\"/api/v1/cart/\".concat(id), {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(function () {\n        commit('removeFromCart', id);\n      });\n    }\n  }\n});","map":{"version":3,"names":["createStore","state","catalog","cart","category","preView","imageUrl","getters","getCatalog","getCategory","getCart","getCartCount","reduce","acc","item","quantity","mutations","setCatalog","setCart","setCategory","alert","addToCart","product","existProduct","find","id","push","Object","assign","removeFromCart","idx","findIndex","splice","setQuantity","actions","loadCatalog","commit","fetch","then","response","json","data","loadCatalogCategory","loadCart","method","headers","body","JSON","stringify"],"sources":["D:/GeekBrains/Практика geekbrains/Agile practic/Совместный проект-стажировка/Совместный проект-стажировка/src/store/index.js"],"sourcesContent":["import { createStore } from 'vuex'\n\nexport default createStore({\n\n  state: {\n    catalog: [{}],\n    cart: [],\n    category: [],\n    preView: [],        \n    imageUrl: 'http://svalka-back.im56.ru/'\n  },\n  getters: {\n    getCatalog: (state) => [...state.catalog],\n    getCategory: (state) => [...state.category],\n    getCart: (state) => [...state.cart],\n    //getPreView: (state) = [...state.catalog],    \n    getCartCount: (state) => state.cart.reduce((acc, item) => acc + item.quantity, 0)\n  },\n  mutations: {\n    setCatalog: (state, catalog) => { state.catalog = catalog },\n    // setCatalog: (state, catalog) => {console.log(state)},\n    setCart: (state, cart) => { state.cart = cart },\n    setCategory: (state, category) => {state.category = category },\n    preView: (state, catalog) => { state.preView = catalog;\n    alert('test') },\n\n    addToCart: (state, product) => { \n      const existProduct = state.cart.find(item => item.id === product.id)\n      // console.log(product);\n      if(existProduct) {\n        existProduct.quantity++\n      } else {\n        state.cart.push(Object.assign({quantity: 1}, product))\n      }\n    },    \n    removeFromCart: (state, id) => {\n      const idx = state.cart.findIndex((item) => item.id === id)\n\n      state.cart.splice(idx, 1);\n    },\n    setQuantity: (state, {id, quantity}) => {\n      const product = state.cart.find(item => item.id === id)\n      product.quantity = quantity\n    }\n  },\n  actions: {\n    loadCatalog({ commit }) {\n      // return fetch('https://jsonplaceholder.typicode.com/photos?_limit=10')\n     return fetch('http://svalka-back.im56.ru/api/products')\n        .then((response) => response.json())\n        .then((data) => {\n          // console.log(data);\n          commit('setCatalog', data);\n        })\n    },\n    loadCatalogCategory({ commit }) {\n      return fetch('http://svalka-back.im56.ru/api/categories')\n          .then((response) => response.json())\n          .then((data) => {\n            //console.log(data);\n            commit('setCategory', data);\n          })\n    },\n    loadCart({ commit }) {\n      return fetch(`/api/v1/cart`)\n        .then((response) => response.json())\n        .then((data) => {\n          commit('setCart', data);\n        })\n    },    \n    addToCart({ commit }, product) {\n      return fetch(`/api/v1/cart`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(product)\n      })\n        .then(() => {\n          commit('addToCart', product);\n        })\n    },\n    preView({ commit }, product) {\n      return fetch(`/api/v1/preView`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(product)\n      })\n        .then(() => {\n          commit('preView', product);\n        })\n    },\n    setQuantity({ commit }, {id, quantity}) {\n      return fetch(`/api/v1/cart/${id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({quantity: quantity})\n      })\n        .then(() => {\n          commit('setQuantity', {id, quantity});\n        })\n    },\n    removeFromCart({ commit }, id) {\n      return fetch(`/api/v1/cart/${id}`, {\n        method: 'DELETE',\n        headers: { 'Content-Type': 'application/json' }\n      })\n        .then(() => {\n          commit('removeFromCart', id);\n        })\n    },\n  }\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}